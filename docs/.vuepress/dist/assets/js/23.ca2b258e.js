(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{575:function(t,e,s){"use strict";s.r(e);var a=s(12),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"数据结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据结构"}},[t._v("#")]),t._v(" 数据结构")]),t._v(" "),s("p",[t._v("了解一下插件发送给后端的数据格式是怎样的吧!")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  baseInfo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    clientHeight"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("977")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    clientWidth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("549")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    colorDepth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    deviceId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"t_13466167-991854d1-da9f0cf52c91fac4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    gatherAppName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chengxh"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"13488cb7-57de65e0-8fa72c8ab05eeac7"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pixelDepth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    platform"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Win32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    screenHeight"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1080")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    screenWidth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1920")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    sdkVersion"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.1-alpha.8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    sendTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1641518497118")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    sessionId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s_13488cb7-57de65d5-4621697435f47777"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Google Inc."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  eventInfo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      eventId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"13488cb7-57de65e0-8fa72c8ab05eeac7"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      eventType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pv"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      operateAction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"back_forward"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      referer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8083/contents.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      sendTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1641518497118")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"trace performance"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      triggerTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1641518497107"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pv"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8083/event.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      dom"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      eventId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      eventType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"performance"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      firstbyte"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      fmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("130.7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      loadon"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("145")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ready"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("109.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ssllink"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      trans"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ttfb"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      tti"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("108.4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pagePerformance"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8083/event.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"baseinfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#baseinfo"}},[t._v("#")]),t._v(" baseInfo")]),t._v(" "),s("p",[t._v("全局的一些参数,每次发送采集都会附带传给后台")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性名")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("clientHeight")]),t._v(" "),s("td",[t._v("网页可见区高度")])]),t._v(" "),s("tr",[s("td",[t._v("clientWidth")]),t._v(" "),s("td",[t._v("网页可见区宽度")])]),t._v(" "),s("tr",[s("td",[t._v("colorDepth")]),t._v(" "),s("td",[t._v("显示屏幕调色板的比特深度")])]),t._v(" "),s("tr",[s("td",[t._v("pixelDepth")]),t._v(" "),s("td",[t._v("显示屏幕的颜色分辨率")])]),t._v(" "),s("tr",[s("td",[t._v("deviceId")]),t._v(" "),s("td",[t._v("设备ID")])]),t._v(" "),s("tr",[s("td",[t._v("screenWidth")]),t._v(" "),s("td",[t._v("显示屏幕的宽度")])]),t._v(" "),s("tr",[s("td",[t._v("screenHeight")]),t._v(" "),s("td",[t._v("显示屏幕的高度")])]),t._v(" "),s("tr",[s("td",[t._v("vendor")]),t._v(" "),s("td",[t._v("浏览器名称")])]),t._v(" "),s("tr",[s("td",[t._v("platform")]),t._v(" "),s("td",[t._v("浏览器平台的环境,不是电脑系统的x64这样的(浏览器平台的环境可能是x32)")])]),t._v(" "),s("tr",[s("td",[t._v("sdkVersion")]),t._v(" "),s("td",[t._v("插件版本号")])]),t._v(" "),s("tr",[s("td",[t._v("sendTime")]),t._v(" "),s("td",[t._v("发送时间")])]),t._v(" "),s("tr",[s("td",[t._v("appName")]),t._v(" "),s("td",[t._v("应用Name")])]),t._v(" "),s("tr",[s("td",[t._v("appCode")]),t._v(" "),s("td",[t._v("应用Code")])]),t._v(" "),s("tr",[s("td",[t._v("pageId")]),t._v(" "),s("td",[t._v("应用ID")])]),t._v(" "),s("tr",[s("td",[t._v("sessionId")]),t._v(" "),s("td",[t._v("会话ID")])]),t._v(" "),s("tr",[s("td",[t._v("customerId")]),t._v(" "),s("td",[t._v("类型ID")])]),t._v(" "),s("tr",[s("td",[t._v("userUuid")]),t._v(" "),s("td",[t._v("用户ID")])])])]),t._v(" "),s("h2",{attrs:{id:"eventinfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eventinfo"}},[t._v("#")]),t._v(" eventInfo")]),t._v(" "),s("p",[t._v("采集到的事件数组,这些事件有不同的类型,"),s("strong",[t._v("不同类型下的埋点数据结构有一些差异")]),s("br"),t._v("\n⛔️这里主要介绍"),s("code",[t._v("eventType type eventId")]),t._v("的取值以及意义,不同事件类型的数据结构会在对应的目录中展示并说明⛔️")]),t._v(" "),s("h3",{attrs:{id:"eventtype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eventtype"}},[t._v("#")]),t._v(" eventType")]),t._v(" "),s("p",[t._v("eventType用于表明事件的类型,类型为固定的以下几种(浏览器自身基础事件和自定义事件)")]),t._v(" "),s("ul",[s("li",[t._v("pv ( 路由 )")]),t._v(" "),s("li",[t._v("error ( 错误 )")]),t._v(" "),s("li",[t._v("performance ( 资源 )")]),t._v(" "),s("li",[t._v("click ( 点击 )")]),t._v(" "),s("li",[t._v("dwell ( 页面卸载 )")]),t._v(" "),s("li",[t._v("custom ( 手动触发事件的类型 )")])]),t._v(" "),s("h3",{attrs:{id:"type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" type")]),t._v(" "),s("p",[t._v("作为"),s("code",[t._v("eventType")]),t._v("的补充字段,把某些事件类型合并,同时也增加某些事件区分度,易于后台分类")]),t._v(" "),s("ul",[s("li",[t._v("mix ( 合并这些eventType事件: click, submit, scroll, change )")]),t._v(" "),s("li",[t._v("resourcePerformance ( eventType === performance && eventId === resource )")]),t._v(" "),s("li",[t._v("pagePerformance ( eventType === performance && eventId === page )")]),t._v(" "),s("li",[t._v("serverPerformance ( eventType === performance && eventId === server )")])]),t._v(" "),s("blockquote",[s("p",[t._v("其他 eventType 事件类型就不做特殊处理,例如 eventType === pv时 type 也会赋值为 pv")])]),t._v(" "),s("h3",{attrs:{id:"eventid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eventid"}},[t._v("#")]),t._v(" eventId")]),t._v(" "),s("p",[t._v("eventId用于表明事件的唯一标识,同一类型下的事件可能会有细分")]),t._v(" "),s("ul",[s("li",[t._v("resource ( 在对资源进行采集时都会作为eventId )")]),t._v(" "),s("li",[t._v("page ( 在发送首次页面性能数据时会作为eventId )")]),t._v(" "),s("li",[t._v("code ( 在代码异常时会作为eventId )")]),t._v(" "),s("li",[t._v("server ( 在请求采集时会作为eventId )")]),t._v(" "),s("li",[t._v("[target.nodeName] ( 元素名 ps:script, 在html元素上发生异常时会作为eventId )")]),t._v(" "),s("li",[t._v("[pageId] ( 在页面跳转时会带上应用ID作为eventId )")])]),t._v(" "),s("p",[t._v("特殊情况:")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("eventType")]),t._v("为"),s("code",[t._v("dwell")]),t._v("时"),s("code",[t._v("eventId")]),t._v("是一串根据时间戳计算得来的字符")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("eventType")]),t._v("为"),s("code",[t._v("click")]),t._v("时"),s("code",[t._v("eventId")]),t._v("的采集顺序为")]),t._v(" "),s("ol",[s("li",[t._v("从触发的元素向上找其父级元素(直到body之下)的属性,用最先找到的"),s("code",[t._v("data-warden-event-id")]),t._v("属性的值")]),t._v(" "),s("li",[t._v("与上同理,用最先找到的"),s("code",[t._v("title")]),t._v("属性的值")]),t._v(" "),s("li",[t._v("与上同理,找到带有"),s("code",[t._v("data-warden-container")]),t._v("属性的元素\n"),s("ol",[s("li",[t._v("找到的话")]),t._v(" "),s("li",[t._v("用这个元素属性的"),s("code",[t._v("data-warden-event-id")]),t._v("值")]),t._v(" "),s("li",[t._v("用这个元素属性的"),s("code",[t._v("title")]),t._v("值")]),t._v(" "),s("li",[t._v("都没有的话就用这个元素属性的"),s("code",[t._v("data-warden-container")]),t._v("值")]),t._v(" "),s("li",[t._v("还是没有的话就用触发元素的"),s("code",[t._v("tagName")])])])]),t._v(" "),s("li",[t._v("用触发元素的"),s("code",[t._v("tagName")])])]),t._v(" "),s("blockquote",[s("p",[t._v("主动调用 tracePageView() 时不能指定 eventType(pv) 以及 eventId([pageId])")]),t._v(" "),s("p",[t._v("主动调用 traceError() 时不能指定 eventType(error) ,可以指定eventId")]),t._v(" "),s("p",[t._v("主动调用 traceCustomEvent() 时不能指定 eventType(custom) ,可以指定eventId")]),t._v(" "),s("p",[t._v("主动调用 tracePerformance() 时不能指定 eventType(performance) ,可以指定eventId")])])])}),[],!1,null,null,null);e.default=n.exports}}]);